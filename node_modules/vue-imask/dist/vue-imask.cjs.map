{"version":3,"file":"vue-imask.cjs","sources":["../src/props.ts","../src/composable.ts","../src/utils.ts","../src/component3-composition.ts","../src/component2.ts","../src/component.ts","../src/directive.ts"],"sourcesContent":["import { type PropType } from 'vue-demi';\nimport { type FactoryOpts, type MaskedDynamicOptions } from 'imask';\n\nexport default {\n  // common\n  mask: undefined as unknown as PropType<FactoryOpts['mask']>,\n  prepare: Function as PropType<FactoryOpts['prepare']>,\n  prepareChar: Function as PropType<FactoryOpts['prepareChar']>,\n  validate: Function as PropType<FactoryOpts['validate']>,\n  commit: Function as PropType<FactoryOpts['commit']>,\n  overwrite: {\n    type: Boolean,\n    required: false,\n    default: undefined,\n  },\n  eager: {\n    required: false,\n    default: undefined,\n    validator: (value: unknown) => ['append', 'remove'].includes(value as string) || typeof value === 'boolean',\n  },\n  skipInvalid: { type: Boolean, required: false, default: undefined },\n\n  // pattern\n  placeholderChar: String,\n  displayChar: String,\n  lazy: { type: Boolean, required: false, default: undefined },\n  definitions: Object,\n  blocks: Object,\n\n  // enum\n  enum: Array,\n\n  // range\n  maxLength: Number,\n  from: Number,\n  to: Number,\n\n  // date\n  pattern: String,\n  format: Function as PropType<FactoryOpts['format']>,\n  parse: Function as PropType<FactoryOpts['parse']>,\n  autofix: {\n    required: false,\n    default: undefined,\n    validator: (value: unknown) => value === 'pad' || typeof value === 'boolean',\n  },\n\n  // number\n  radix: String,\n  thousandsSeparator: String,\n  mapToRadix: Array,\n  scale: Number,\n  normalizeZeros: {\n    type: Boolean,\n    required: false,\n    default: undefined,\n  },\n  padFractionalZeros: {\n    type: Boolean,\n    required: false,\n    default: undefined,\n  },\n  min: [Number, Date],\n  max: [Number, Date],\n\n  // dynamic\n  dispatch: Function as PropType<MaskedDynamicOptions['dispatch']>\n};\n","import { ref, readonly, isRef, watch, onMounted, onUnmounted, type DeepReadonly, type Ref } from 'vue-demi';\nimport IMask, { type FactoryOpts, type InputMaskElement, type InputMask } from 'imask';\n\nexport\ntype ComposableEmitEventBase = 'accept' | 'complete';\n\nexport\ntype ComposableEmitEvent = ComposableEmitEventBase | `${ComposableEmitEventBase}:masked` | `${ComposableEmitEventBase}:typed` | `${ComposableEmitEventBase}:unmasked`;\n\nexport\ntype ComposableEmitValue<E extends ComposableEmitEvent, Opts extends FactoryOpts> =\n  E extends ComposableEmitEventBase | `${ComposableEmitEventBase}:masked` ? InputMask<Opts>['value'] :\n  E extends `${ComposableEmitEventBase}:unmasked` ? InputMask<Opts>['unmaskedValue'] :\n  E extends `${ComposableEmitEventBase}:typed` ? InputMask<Opts>['typedValue'] :\n  never\n;\n\nexport\ntype ComposableParams<Opts extends FactoryOpts> = {\n  emit?: <E extends ComposableEmitEvent>(eventName: E, value: ComposableEmitValue<E, Opts>, e?: InputEvent) => void,\n  onAccept?: (e?: InputEvent) => void,\n  onComplete?: (e?: InputEvent) => void,\n}\n\nexport default\nfunction useIMask<\n  MaskElement extends InputMaskElement,\n  Opts extends FactoryOpts\n> (props: Opts | Ref<Opts>, { emit, onAccept, onComplete }: ComposableParams<Opts>={}): {\n  el: Ref<MaskElement | undefined>,\n  mask: DeepReadonly<Ref<InputMask<Opts> | undefined>>,\n  masked: Ref<InputMask<Opts>['value']>,\n  unmasked: Ref<InputMask<Opts>['unmaskedValue']>,\n  typed: Ref<InputMask<Opts>['typedValue']>,\n} {\n  const _props = (isRef(props) ? props : ref(props)) as Ref<Opts>;\n  const el: Ref<MaskElement | undefined> = ref();\n  const mask: Ref<InputMask<Opts> | undefined> = ref();\n  const masked: Ref<InputMask<Opts>['value']> = ref('');\n  const unmasked: Ref<InputMask<Opts>['unmaskedValue']> = ref('');\n  const typed: Ref<InputMask<Opts>['typedValue']> = ref(null);\n  const initialized = ref(false);\n  let $el: MaskElement | undefined;\n  let $lastAcceptedValue: InputMask<Opts>['value'] | undefined;\n  let $lastAcceptedUnmaskedValue: InputMask<Opts>['unmaskedValue'] | undefined;\n  let $lastAcceptedTypedValue: InputMask<Opts>['typedValue'] | undefined;\n\n  function _onAccept (event?: InputEvent) {\n    $lastAcceptedTypedValue = typed.value = (mask.value as InputMask<Opts>).typedValue;\n    $lastAcceptedUnmaskedValue = unmasked.value = (mask.value as InputMask<Opts>).unmaskedValue;\n    $lastAcceptedValue = masked.value = (mask.value as InputMask<Opts>).value;\n\n    if (emit) {\n      emit('accept', masked.value, event);\n      emit('accept:masked', masked.value, event);\n      emit('accept:typed', typed.value, event);\n      emit('accept:unmasked', unmasked.value, event);\n    }\n    if (onAccept) onAccept(event);\n  }\n\n  function _onComplete (event?: InputEvent) {\n    if (emit) {\n      emit('complete', (mask.value as InputMask<Opts>).value, event);\n      emit('complete:masked', (mask.value as InputMask<Opts>).value, event);\n      emit('complete:typed', (mask.value as InputMask<Opts>).typedValue, event);\n      emit('complete:unmasked', (mask.value as InputMask<Opts>).unmaskedValue, event);\n    }\n    if (onComplete) onComplete(event);\n  }\n\n  function _initMask () {\n    $el = el.value;\n    const $props = _props.value;\n\n    if (!$el || !$props?.mask) return;\n\n    mask.value = IMask($el, $props)\n      .on('accept', _onAccept)\n      .on('complete', _onComplete);\n\n    _onAccept();\n\n    initialized.value = true;\n  }\n\n  function _destroyMask () {\n    if (!initialized.value) return;\n    mask.value?.destroy();\n    mask.value = undefined;\n  }\n\n  onMounted(_initMask);\n  onUnmounted(_destroyMask);\n\n  watch(unmasked, () => {\n    if (mask.value && initialized.value) {\n      if ($lastAcceptedUnmaskedValue !== unmasked.value) mask.value.unmaskedValue = unmasked.value;\n      $lastAcceptedUnmaskedValue = undefined;\n    }\n  });\n\n  watch(masked, () => {\n    if (mask.value && initialized.value) {\n      if ($lastAcceptedValue !== masked.value) mask.value.value = masked.value;\n      $lastAcceptedValue = undefined;\n    }\n  });\n\n  watch(typed, () => {\n    if (mask.value && initialized.value) {\n      if ($lastAcceptedTypedValue !== typed.value) mask.value.typedValue = typed.value;\n      $lastAcceptedTypedValue = undefined;\n    }\n  });\n\n  watch([el, _props], () => {\n    const $newEl = el.value;\n    const $props = _props.value;\n\n    if (!$props?.mask || $newEl !== $el) _destroyMask();\n    if ($newEl) {\n      if (!mask.value) {\n        _initMask();\n      } else {\n        mask.value.updateOptions($props as any);\n      }\n    }\n  });\n\n  return {\n    el,\n    mask: readonly(mask),\n    masked,\n    unmasked,\n    typed,\n  };\n}\n","export\nfunction extractOptionsFromProps<\n  Props extends Record<string, any>,\n  ExcludeProps extends keyof Props\n> (props: Props, exclude: Readonly<ExcludeProps[]>): Omit<Props, ExcludeProps> {\n  props = {...props};\n\n  // keep only defined props\n  (Object.keys(props) as Array<ExcludeProps>)\n    .forEach(prop => {\n      if (props[prop] === undefined || exclude.includes(prop)) delete props[prop];\n    });\n\n  return props;\n}\n","import { type FactoryOpts } from 'imask';\nimport { h, watch, toRef, defineComponent, PropType } from 'vue-demi';\nimport props from './props';\nimport useIMask, { type ComposableParams } from './composable';\nimport { extractOptionsFromProps } from './utils';\n\n\nexport\ntype MaskProps = FactoryOpts & {\n  modelValue: string,\n  value: string,\n  unmasked: string,\n  typed: any,\n}\n\n// order does matter = priority\nconst VALUE_PROPS = ['typed', 'unmasked', 'value', 'modelValue'] as const; \n\n\nexport default defineComponent<MaskProps>({\n  name: 'imask-input',\n  inheritAttrs: false,\n\n  props: {\n    // plugin\n    modelValue: String,\n    value: String,\n    unmasked: String,\n    typed: Object as PropType<any>,\n\n    ...props,\n  },\n\n  emits: [\n    'update:modelValue',\n    'update:masked',\n    'update:value',\n    'update:unmasked',\n    'update:typed',\n    'accept',\n    'accept:value',\n    'accept:masked',\n    'accept:unmasked',\n    'accept:typed',\n    'complete',\n    'complete:value',\n    'complete:masked',\n    'complete:unmasked',\n    'complete:typed',\n  ],\n\n  setup (props, { attrs, emit }) {\n    const { el, masked, unmasked, typed } = useIMask(extractOptionsFromProps(props as MaskProps, VALUE_PROPS) as FactoryOpts, {\n      emit,\n      onAccept: (event?: InputEvent) => {\n        // emit more events\n        const v = masked.value;\n        emit('accept:value', v, event);\n        emit('update:value', v, event);\n        emit('update:masked', v, event);\n        emit('update:modelValue', v, event);\n\n        emit('update:unmasked', unmasked.value, event);\n        emit('update:typed', typed.value, event);\n      },\n      onComplete: (event?: InputEvent) => {\n        emit('complete:value', masked.value, event);\n      },\n    } as ComposableParams<MaskProps>);\n\n    const pvalue = toRef(props, 'value');\n    const pmodelValue = toRef(props, 'modelValue');\n    const punmasked = toRef(props, 'unmasked');\n    const ptyped = toRef(props, 'typed');\n\n    masked.value = pmodelValue.value || pvalue.value || '';\n    unmasked.value = punmasked.value;\n    typed.value = ptyped.value;\n\n    watch(pvalue, v => masked.value = v);\n    watch(pmodelValue, v => masked.value = v);\n    watch(punmasked, v => unmasked.value = v);\n    watch(ptyped, v => typed.value = v);\n\n    return () => {\n      // TODO type?\n      const data: Record<string, any> = {\n        ...attrs,\n        value: props.value != null ? props.value : props.modelValue,\n        ref: el,\n      };\n\n      if (!props.mask) {\n        data.onInput = (event: InputEvent) => {\n          emit('update:modelValue', (event.target as HTMLInputElement).value);\n          emit('update:value', (event.target as HTMLInputElement).value);\n        }\n      }\n\n      return h('input', data);\n    };\n  },\n});\n","import { Vue2, type VNode } from 'vue-demi';\nimport IMask, { type InputMask, type FactoryOpts } from 'imask';\nimport props from './props';\nimport { extractOptionsFromProps } from './utils';\n\n\nexport default Vue2?.extend({\n  name: 'imask-input',\n\n  data () {\n    return {} as { maskRef?: InputMask<FactoryOpts> };\n  },\n\n  render (createElement): VNode {\n    const data = {\n      domProps: {\n        value: this.maskRef ? this.maskRef.value : this.value\n      },\n      on: {...this.$listeners},\n    };\n\n    // if there is no mask use default input event\n    if (!this.$props.mask) {\n      data.on.input = (event: InputEvent) => this.$emit('input', (event.target as HTMLInputElement).value);\n    } else {\n      delete data.on.input;\n    }\n\n    return createElement('input', data);\n  },\n\n  mounted () {\n    if (!this.$props.mask) return;\n\n    this._initMask();\n  },\n\n  destroyed () {\n    this._destroyMask();\n  },\n\n  computed: {\n    maskOptions (): FactoryOpts {\n      return extractOptionsFromProps(this.$props, ['value', 'unmask']) as FactoryOpts;\n    },\n  },\n\n  watch: {\n    '$props': {\n      handler (props) {\n        const maskOptions = this.maskOptions;\n        if (maskOptions.mask) {\n          if (this.maskRef) {\n            this.maskRef.updateOptions(maskOptions);\n            if ('value' in props) this._updateValue();\n          } else {\n            this._initMask(maskOptions);\n            if (props.value !== this._maskValue()) this._onAccept();\n          }\n        } else {\n          this._destroyMask();\n          if ('value' in props) (this.$el as HTMLInputElement).value = props.value;\n        }\n      },\n      deep: true\n    }\n  },\n\n  methods: {\n    _maskValue (): any {\n      if (this.unmask === 'typed') return this.maskRef?.typedValue;\n      if (this.unmask) return this.maskRef?.unmaskedValue;\n      return this.maskRef?.value;\n    },\n\n    _updateValue (): void {\n      if (!this.maskRef) return;\n\n      const value = this.value == null && this.unmask !== 'typed' ? '' : this.value;\n      if (this.unmask === 'typed') this.maskRef.typedValue = value;\n      else if (this.unmask) this.maskRef.unmaskedValue = value as string;\n      else this.maskRef.value = value as string;\n    },\n\n    _onAccept (): void {\n      const val = this._maskValue();\n      this.$emit('input', val);\n      this.$emit('accept', val);\n    },\n\n    _onComplete (): void {\n      this.$emit('complete', this._maskValue());\n    },\n\n    _initMask (maskOptions?: FactoryOpts): void {\n      if (!maskOptions) maskOptions = this.maskOptions;\n\n      this.maskRef = IMask((this.$el as HTMLInputElement), maskOptions)\n        .on('accept', this._onAccept.bind(this))\n        .on('complete', this._onComplete.bind(this));\n      this._updateValue();\n    },\n\n    _destroyMask (): void {\n      if (this.maskRef) {\n        this.maskRef.destroy();\n        delete this.maskRef;\n      }\n    }\n  },\n\n  props: {\n    value: {},\n    unmask: {\n      validator: (value) => value === 'typed' || typeof value === 'boolean',\n    },\n    ...props,\n  },\n});\n","import { isVue3 } from 'vue-demi';\n\nimport Component3 from './component3-composition';\nimport Component2 from './component2';\n\n\nexport default isVue3 ? Component3 : Component2;\n","import IMask, { type InputElement, type InputMask, type FactoryArg, type UpdateOpts } from 'imask';\nimport { isVue3 } from 'vue-demi';\n\n\ntype DirectiveMaskElement<Opts extends FactoryArg> = InputElement & { maskRef?: InputMask<Opts> }\n\nexport default {\n  name: 'imask',\n\n  [isVue3 ? 'beforeMount' : 'bind']: <Opts extends FactoryArg>(el: DirectiveMaskElement<Opts>, { value: options }: { value: Opts }) => {\n    if (!options) return;\n\n    initMask(el, options);\n  },\n\n  [isVue3 ? 'updated' : 'update']: <Opts extends FactoryArg>(el: DirectiveMaskElement<Opts>, { value: options }: { value: Opts | UpdateOpts<Opts> }) => {\n    if (options) {\n      if (el.maskRef) {\n        el.maskRef.updateOptions(options as UpdateOpts<Opts>);\n        if (el.value !== el.maskRef.value) el.maskRef._onChange();\n      }\n      else initMask(el, options as Opts);\n    } else {\n      destroyMask(el);\n    }\n  },\n\n  [isVue3 ? 'unmounted' : 'unbind']: <Opts extends FactoryArg>(el: DirectiveMaskElement<Opts>) => {\n    destroyMask(el);\n  }\n};\n\nfunction fireEvent<Opts extends FactoryArg> (el: DirectiveMaskElement<Opts>, eventName: string, data: InputMask<Opts>) {\n  const e = document.createEvent('CustomEvent');\n  e.initCustomEvent(eventName, true, true, data);\n  el.dispatchEvent(e);\n}\n\nfunction initMask<Opts extends FactoryArg> (el: DirectiveMaskElement<Opts>, opts: Opts) {\n  el.maskRef = IMask(el, opts)\n    .on('accept', () => fireEvent(el, 'accept', el.maskRef as InputMask<Opts>))\n    .on('complete', () => fireEvent(el, 'complete', el.maskRef as InputMask<Opts>));\n}\n\nfunction destroyMask <Opts extends FactoryArg>(el: DirectiveMaskElement<Opts>) {\n  if (el.maskRef) {\n    el.maskRef.destroy();\n    delete el.maskRef;\n  }\n}\n"],"names":["mask","undefined","prepare","Function","prepareChar","validate","commit","overwrite","type","Boolean","required","default","eager","validator","value","includes","skipInvalid","placeholderChar","String","displayChar","lazy","definitions","Object","blocks","enum","Array","maxLength","Number","from","to","pattern","format","parse","autofix","radix","thousandsSeparator","mapToRadix","scale","normalizeZeros","padFractionalZeros","min","Date","max","dispatch","useIMask","props","_temp","emit","onAccept","onComplete","_props","isRef","ref","el","masked","unmasked","typed","initialized","$el","$lastAcceptedValue","$lastAcceptedUnmaskedValue","$lastAcceptedTypedValue","_onAccept","event","typedValue","unmaskedValue","_onComplete","_initMask","$props","IMask","on","_destroyMask","_mask$value","destroy","onMounted","onUnmounted","watch","$newEl","updateOptions","readonly","extractOptionsFromProps","exclude","keys","forEach","prop","VALUE_PROPS","defineComponent","name","inheritAttrs","modelValue","emits","setup","_ref","attrs","v","pvalue","toRef","pmodelValue","punmasked","ptyped","data","onInput","target","h","Vue2","extend","render","createElement","domProps","maskRef","$listeners","input","$emit","mounted","destroyed","computed","maskOptions","handler","_updateValue","_maskValue","deep","methods","_this$maskRef","_this$maskRef2","_this$maskRef3","unmask","val","bind","isVue3","Component3","Component2","options","initMask","_ref2","_onChange","destroyMask","fireEvent","eventName","e","document","createEvent","initCustomEvent","dispatchEvent","opts"],"mappings":"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"}